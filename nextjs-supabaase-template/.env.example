# =============================================================================
# MULTIPLE WORKTREE SUPPORT (Development Only)
# =============================================================================
# Supports up to 50 simultaneous worktrees with isolated ports and data.
#
# QUICK SETUP (recommended):
#   ./setup-worktree.sh
#
# That's it! The script auto-detects unique ports from your directory name.
# Same directory always gets the same ports - no tracking needed.
#
# MANUAL OVERRIDE (optional):
# Uncomment and set these if you want specific ports instead of auto-detection:
# COMPOSE_PROJECT_NAME=my-project
# NEXTJS_PORT=3001
# KONG_PORT=8000
# POSTGRES_PORT=5432
# POOLER_PORT=6543

# =============================================================================
# Next.js + Supabase Environment Variables
# =============================================================================
# Copy this file to .env.local for development
# For production (Coolify), these are auto-populated via SERVICE_* variables
# =============================================================================

# =============================================================================
# CLIENT-SIDE (exposed to browser)
# =============================================================================
# These variables are prefixed with NEXT_PUBLIC_ and will be bundled into
# the client-side JavaScript. Only include non-sensitive values here.

# External URL for browser requests (your public Supabase API URL)
# Development: http://localhost:8000
# Production: https://your-supabase-domain.com
NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000

# Anonymous key for client-side authentication
# This key is safe to expose - it only allows operations defined by RLS policies
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# =============================================================================
# SERVER-SIDE ONLY (never exposed to browser)
# =============================================================================
# These variables are only available in API routes, Server Components,
# and server-side code. They should contain sensitive values.

# Internal Docker network URL for server-side requests
# This provides faster communication without external DNS resolution
# Development: http://localhost:8000 (or http://supabase-kong:8000 in Docker)
# Production: http://supabase-kong:8000
SUPABASE_URL=http://supabase-kong:8000

# Service role key - has elevated privileges, bypasses RLS
# NEVER expose this to the client-side
SUPABASE_SERVICE_KEY=your-service-key-here

# =============================================================================
# DATABASE CONNECTIONS
# =============================================================================

# Pooled connection via Supavisor (for app queries)
# Use this for regular database operations in your app
# The ?pgbouncer=true flag is required for connection pooling compatibility
DATABASE_URL=postgres://postgres.dev_tenant:password@supabase-supavisor:5432/postgres?pgbouncer=true

# Direct connection (for migrations only)
# Bypasses the connection pooler - required for DDL operations and migrations
# NEVER use this for regular app queries
DIRECT_URL=postgres://postgres:password@supabase-db:5432/postgres

# =============================================================================
# DOCKER NETWORK (Production only)
# =============================================================================
# The Docker network name that connects to Supabase services
# Must match the network used by the parent Supabase docker-compose.yml
DOCKER_NETWORK=supabase_default

# =============================================================================
# OPTIONAL: Additional Configuration
# =============================================================================

# Pooler tenant ID (should match Supabase config)
# POOLER_TENANT_ID=dev_tenant

# PostgreSQL database name
# POSTGRES_DB=postgres
